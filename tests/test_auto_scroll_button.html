<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Auto Scroll Button</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Auto Scroll Floating Button Styles */
        #auto-scroll-floating {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        #auto-scroll-floating button {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        /* Main button hover effects */
        #auto-scroll-main-btn:hover {
            transform: scale(1.05);
        }

        #auto-scroll-main-btn:active {
            transform: scale(0.95);
        }

        /* Controls panel animations */
        #auto-scroll-controls.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* Settings button animations */
        #auto-scroll-settings-btn.show {
            opacity: 1;
            visibility: visible;
        }

        /* Speed and direction button states */
        .speed-btn.active,
        .direction-btn.active {
            background-color: #10b981 !important;
            color: white !important;
            border-color: #059669 !important;
        }

        .speed-btn:not(.active):hover,
        .direction-btn:not(.active):hover {
            background-color: #f3f4f6;
            transform: translateY(-1px);
        }

        /* Keyboard tooltip */
        #keyboard-tooltip.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #keyboard-tooltip kbd {
            font-family: monospace;
            font-size: 0.75rem;
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
        }

        /* Mobile responsive adjustments */
        @media (max-width: 640px) {
            #auto-scroll-floating {
                bottom: 1rem;
                right: 1rem;
            }
            
            #auto-scroll-main-btn {
                width: 3.5rem;
                height: 3.5rem;
            }
            
            #auto-scroll-controls {
                min-width: 180px;
                bottom: 4rem;
                right: 0;
            }
            
            #keyboard-tooltip {
                display: none; /* Hide keyboard shortcuts on mobile */
            }
            
            /* Larger touch targets for mobile */
            .speed-btn,
            .direction-btn {
                min-height: 2.5rem;
                min-width: 3rem;
            }
        }

        /* Tablet responsive adjustments */
        @media (min-width: 641px) and (max-width: 1024px) {
            #auto-scroll-floating {
                bottom: 1.5rem;
                right: 1.5rem;
            }
            
            #auto-scroll-controls {
                min-width: 190px;
            }
        }

        /* Animation for status changes */
        #auto-scroll-status {
            transition: color 0.3s ease;
        }

        #auto-scroll-status.active {
            color: #10b981;
        }

        #auto-scroll-status.paused {
            color: #f59e0b;
        }

        /* Pulse animation for active state */
        @keyframes pulse-green {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            50% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
        }

        #auto-scroll-main-btn.active {
            animation: pulse-green 2s infinite;
        }

        /* Focus styles for accessibility */
        #auto-scroll-floating button:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }

        /* Speed change feedback */
        .speed-feedback {
            opacity: 0;
            transform: translate(-50%, -20px);
            transition: all 0.3s ease-in-out;
        }

        .speed-feedback.show {
            opacity: 1;
            transform: translate(-50%, 0);
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            #auto-scroll-floating *,
            #auto-scroll-floating *::before,
            #auto-scroll-floating *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            #auto-scroll-main-btn.active {
                animation: none;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="max-w-4xl mx-auto p-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-8">Test Auto Scroll Floating Button</h1>
        
        <!-- Sample content to test scrolling -->
        <div class="space-y-8">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold mb-4">Sample Al-Quran Content</h2>
                <div class="space-y-6">
                    <div class="ayat-container p-6 hover:bg-gray-50 transition duration-200">
                        <div class="arabic-text text-right leading-loose mb-6 font-arabic text-3xl" dir="rtl" lang="ar">
                            بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ
                        </div>
                        <div class="translation-text text-gray-800 leading-relaxed">
                            Dengan nama Allah Yang Maha Pengasih, Maha Penyayang.
                        </div>
                    </div>
                    
                    <div class="ayat-container p-6 hover:bg-gray-50 transition duration-200">
                        <div class="arabic-text text-right leading-loose mb-6 font-arabic text-3xl" dir="rtl" lang="ar">
                            الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ
                        </div>
                        <div class="translation-text text-gray-800 leading-relaxed">
                            Segala puji bagi Allah, Tuhan seluruh alam.
                        </div>
                    </div>
                    
                    <!-- Add more content to enable scrolling -->
                    <div class="space-y-4">
                        <p class="text-gray-600">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                        <p class="text-gray-600">Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                        <p class="text-gray-600">Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                        <p class="text-gray-600">Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                    
                    <!-- Repeat content to make page scrollable -->
                    <div class="space-y-4">
                        <p class="text-gray-600">Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
                        <p class="text-gray-600">Totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt.</p>
                        <p class="text-gray-600">Explicabo nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit.</p>
                        <p class="text-gray-600">Sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
                    </div>
                    
                    <div class="space-y-4">
                        <p class="text-gray-600">Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.</p>
                        <p class="text-gray-600">Sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.</p>
                        <p class="text-gray-600">Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam.</p>
                        <p class="text-gray-600">Nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Auto Scroll Floating Button -->
    <div id="auto-scroll-floating" class="fixed bottom-6 right-6 z-50 transition-all duration-300 ease-in-out">
        <!-- Main Floating Button Container -->
        <div class="bg-white rounded-full shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 ease-in-out">
            <!-- Main Auto Scroll Button -->
            <button id="auto-scroll-main-btn" 
                    class="w-14 h-14 bg-green-600 hover:bg-green-700 text-white rounded-full shadow-lg transition-all duration-200 ease-in-out flex items-center justify-center group"
                    title="Auto Scroll"
                    aria-label="Toggle auto scroll">
                <i id="auto-scroll-icon" class="fas fa-play text-lg group-hover:scale-110 transition-transform duration-200"></i>
            </button>
            
            <!-- Expanded Controls (Initially Hidden) -->
            <div id="auto-scroll-controls" class="absolute bottom-16 right-0 bg-white rounded-lg shadow-lg border border-gray-200 p-3 min-w-[200px] opacity-0 invisible transform translate-y-2 transition-all duration-300 ease-in-out">
                <!-- Speed Control Section -->
                <div class="mb-4">
                    <label class="block text-xs font-medium text-gray-700 mb-2 uppercase tracking-wide">Kecepatan</label>
                    
                    <!-- Preset Speed Buttons -->
                    <div class="flex items-center gap-1 mb-3">
                        <button id="speed-slow" 
                                class="speed-btn px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 bg-gray-100 hover:bg-gray-200 text-gray-700"
                                data-speed="slow"
                                title="Kecepatan lambat"
                                aria-label="Set speed to slow">
                            Lambat
                        </button>
                        <button id="speed-medium" 
                                class="speed-btn px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 bg-green-100 text-green-700 border border-green-300 active"
                                data-speed="medium"
                                title="Kecepatan sedang"
                                aria-label="Set speed to medium">
                            Sedang
                        </button>
                        <button id="speed-fast" 
                                class="speed-btn px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 bg-gray-100 hover:bg-gray-200 text-gray-700"
                                data-speed="fast"
                                title="Kecepatan cepat"
                                aria-label="Set speed to fast">
                            Cepat
                        </button>
                    </div>
                    
                    <!-- Fine Speed Adjustment Controls -->
                    <div class="flex items-center justify-between bg-gray-50 rounded-md p-2">
                        <button id="speed-decrease" 
                                class="w-8 h-8 bg-white hover:bg-gray-100 text-gray-600 hover:text-gray-800 rounded-md transition-all duration-200 flex items-center justify-center shadow-sm border border-gray-200"
                                title="Kurangi kecepatan"
                                aria-label="Decrease speed">
                            <i class="fas fa-minus text-xs"></i>
                        </button>
                        
                        <div class="flex-1 mx-3">
                            <div class="flex items-center justify-center">
                                <span id="speed-indicator" class="text-xs font-medium text-gray-700">Sedang</span>
                            </div>
                            <div class="mt-1">
                                <div class="w-full bg-gray-200 rounded-full h-1.5">
                                    <div id="speed-progress" class="bg-green-500 h-1.5 rounded-full transition-all duration-300" style="width: 50%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <button id="speed-increase" 
                                class="w-8 h-8 bg-white hover:bg-gray-100 text-gray-600 hover:text-gray-800 rounded-md transition-all duration-200 flex items-center justify-center shadow-sm border border-gray-200"
                                title="Tambah kecepatan"
                                aria-label="Increase speed">
                            <i class="fas fa-plus text-xs"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Direction Control Section -->
                <div class="mb-4">
                    <label class="block text-xs font-medium text-gray-700 mb-2 uppercase tracking-wide">Arah</label>
                    <div class="flex items-center gap-1">
                        <button id="direction-down" 
                                class="direction-btn px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 bg-green-100 text-green-700 border border-green-300 flex items-center gap-1"
                                data-direction="down"
                                title="Scroll ke bawah"
                                aria-label="Set direction to down">
                            <i class="fas fa-arrow-down text-xs"></i>
                            Bawah
                        </button>
                        <button id="direction-up" 
                                class="direction-btn px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 bg-gray-100 hover:bg-gray-200 text-gray-700 flex items-center gap-1"
                                data-direction="up"
                                title="Scroll ke atas"
                                aria-label="Set direction to up">
                            <i class="fas fa-arrow-up text-xs"></i>
                            Atas
                        </button>
                    </div>
                </div>
                
                <!-- Status Indicator -->
                <div class="border-t border-gray-200 pt-3">
                    <div class="flex items-center justify-between">
                        <span class="text-xs text-gray-600">Status:</span>
                        <span id="auto-scroll-status" class="text-xs font-medium text-gray-500">Tidak Aktif</span>
                    </div>
                </div>
                
                <!-- Settings Button -->
                <div class="border-t border-gray-200 pt-3 mt-3">
                    <button id="auto-scroll-reset" 
                            class="w-full px-3 py-2 text-xs font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-all duration-200 flex items-center justify-center gap-1"
                            title="Reset pengaturan"
                            aria-label="Reset settings to default">
                        <i class="fas fa-undo text-xs"></i>
                        Reset
                    </button>
                </div>
            </div>
            
            <!-- Settings Toggle Button -->
            <button id="auto-scroll-settings-btn" 
                    class="absolute -top-2 -left-2 w-8 h-8 bg-gray-600 hover:bg-gray-700 text-white rounded-full shadow-md transition-all duration-200 ease-in-out flex items-center justify-center opacity-0 invisible"
                    title="Pengaturan auto scroll"
                    aria-label="Toggle auto scroll settings">
                <i class="fas fa-cog text-xs"></i>
            </button>
        </div>
        
        <!-- Keyboard Shortcuts Tooltip (Initially Hidden) -->
        <div id="keyboard-tooltip" class="absolute bottom-16 right-16 bg-gray-800 text-white text-xs rounded-lg p-3 opacity-0 invisible transform translate-y-2 transition-all duration-300 ease-in-out max-w-[200px]">
            <div class="font-medium mb-2">Shortcut Keyboard:</div>
            <div class="space-y-1 text-xs">
                <div><kbd class="bg-gray-700 px-1 rounded">Space</kbd> - Play/Pause</div>
                <div><kbd class="bg-gray-700 px-1 rounded">+</kbd> - Percepat</div>
                <div><kbd class="bg-gray-700 px-1 rounded">-</kbd> - Perlambat</div>
            </div>
        </div>
    </div>

    <!-- Include ScrollEngine, SettingsManager and AutoScrollComponent -->
    <script src="assets/js/scroll-engine.js"></script>
    <script src="assets/js/settings-manager.js"></script>
    <script src="assets/js/auto-scroll-component.js"></script>
    <script src="assets/js/scroll-status-indicator.js"></script>
    
    <script>
        // Auto Scroll Floating Button Functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the integrated auto scroll component
            const autoScrollComponent = new AutoScrollComponent('auto-scroll-floating');
            
            // Listen for component events
            document.addEventListener('autoScroll:initialized', function(event) {
                console.log('Auto scroll component initialized:', event.detail);
            });
            
            document.addEventListener('autoScroll:settingsRestored', function(event) {
                console.log('Settings restored:', event.detail.settings);
            });
            
            document.addEventListener('autoScroll:settingsReset', function(event) {
                console.log('Settings reset to defaults');
            });
            
            // Make component available globally for debugging
            window.autoScrollComponent = autoScrollComponent;
        });
    </script>
</body>
</html>